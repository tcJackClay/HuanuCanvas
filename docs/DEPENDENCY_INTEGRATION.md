# HuanuCanvas ä¾èµ–æ•´åˆè¯´æ˜

## ğŸ“‹ **æ•´åˆå®Œæˆæ€»ç»“**

### âœ… **æ•´åˆæˆæœ**

#### **1. ä¾èµ–ç»Ÿä¸€**
- âœ… **åç«¯ä¾èµ–å·²æ•´åˆ**: Express, CORS, Multer, Sharp, PKG
- âœ… **å¼€å‘å·¥å…·ç»Ÿä¸€**: æ‰€æœ‰ä¾èµ–éƒ½åœ¨å•ä¸€package.jsonä¸­ç®¡ç†
- âœ… **ç‰ˆæœ¬ä¸€è‡´æ€§**: ä½¿ç”¨ç»Ÿä¸€çš„Node.js 21.13.0ç¯å¢ƒ

#### **2. é…ç½®ä¿®æ­£**
- âœ… **è·¯å¾„å¼•ç”¨ä¿®æ­£**: `backend-nodejs` â†’ `src/backend`
- âœ… **Electronæ„å»ºä¿®æ­£**: æ„å»ºé…ç½®å·²æ›´æ–°
- âœ… **Scriptsä¼˜åŒ–**: æ·»åŠ äº†backendç®¡ç†è„šæœ¬

#### **3. å®‰è£…ç®€åŒ–**
- âœ… **å•ä¸€å®‰è£…å‘½ä»¤**: `npm install` å³å¯å®‰è£…æ‰€æœ‰ä¾èµ–
- âœ… **æ— éœ€åˆ†åˆ«å®‰è£…**: ä¸å†éœ€è¦åˆ†åˆ«å®‰è£…å‰åç«¯ä¾èµ–
- âœ… **Monorepoç»“æ„**: é‡‡ç”¨ç°ä»£åŒ–çš„å•ä¸€åŒ…ç®¡ç†ç»“æ„

### ğŸ“ **æ•´åˆåçš„é¡¹ç›®ç»“æ„**

```
HuanuCanvas/
â”œâ”€â”€ package.json                 # ç»Ÿä¸€é…ç½® (å‰ç«¯+åç«¯+Electron)
â”œâ”€â”€ .npmrc                      # npmé…ç½®ä¼˜åŒ–
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ backend/                # åç«¯æºç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â””â”€â”€ server.js       # åç«¯æœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ data/               # åç«¯æ•°æ®ç›®å½•
â”‚   â”‚   â””â”€â”€ (æ— ç‹¬ç«‹package.json)
â”‚   â”œâ”€â”€ frontend/               # å‰ç«¯æºç ç›®å½•
â”‚   â””â”€â”€ shared/                 # å…±äº«ä»£ç 
â”œâ”€â”€ electron/                   # Electroné…ç½®
â”œâ”€â”€ deployment/                 # éƒ¨ç½²é…ç½®
â”œâ”€â”€ scripts/                    # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ deploy.sh                  # ç»Ÿä¸€éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ manage.sh                  # æœåŠ¡ç®¡ç†è„šæœ¬
â”œâ”€â”€ health.sh                  # å¥åº·æ£€æŸ¥è„šæœ¬
â””â”€â”€ verify-integration.sh      # æ•´åˆéªŒè¯è„šæœ¬
```

### ğŸ”§ **æ–°å¢Scriptsè¯´æ˜**

#### **Backendç®¡ç†è„šæœ¬**
```bash
npm run backend:dev    # å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
npm run backend:start  # å¯åŠ¨åç«¯ç”Ÿäº§æœåŠ¡å™¨
npm run backend:build  # æ„å»ºåç«¯å¯æ‰§è¡Œæ–‡ä»¶
npm run install:all    # å®‰è£…æ‰€æœ‰ä¾èµ– (ä¿ç•™å‘åå…¼å®¹)
```

#### **ç»Ÿä¸€Scripts**
```bash
npm run dev          # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run build        # æ„å»ºå‰ç«¯åº”ç”¨
npm run electron:dev # å¯åŠ¨Electronå¼€å‘æ¨¡å¼ (å‰åç«¯+Electron)
npm run electron:build # æ„å»ºElectronåº”ç”¨
```

### ğŸ¯ **æ•´åˆä¼˜åŠ¿**

#### **1. ç®¡ç†ç®€åŒ–**
- **ä¹‹å‰**: éœ€è¦åˆ†åˆ«ç®¡ç†2ä¸ªpackage.jsonå’Œ2ä¸ªnode_modules
- **ç°åœ¨**: å•ä¸€package.jsonï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¾èµ–

#### **2. å®‰è£…ç®€åŒ–**
- **ä¹‹å‰**: éœ€è¦è¿è¡Œå¤šæ¬¡å®‰è£…å‘½ä»¤
- **ç°åœ¨**: `npm install` ä¸€é”®å®‰è£…æ‰€æœ‰ä¾èµ–

#### **3. æ„å»ºä¼˜åŒ–**
- **ä¹‹å‰**: å¤æ‚çš„ä¾èµ–å…³ç³»å’Œè·¯å¾„é…ç½®
- **ç°åœ¨**: æ¸…æ™°çš„Monorepoç»“æ„ï¼Œç°ä»£åŒ–æ„å»ºæµç¨‹

#### **4. å¼€å‘ä½“éªŒ**
- **ä¹‹å‰**: éœ€è¦åˆ†åˆ«å¯åŠ¨å‰åç«¯æœåŠ¡
- **ç°åœ¨**: `npm run electron:dev` ä¸€é”®å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ

### ğŸš€ **ä½¿ç”¨æ–¹æ³•**

#### **å¼€å‘ç¯å¢ƒ**
```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ (æ¨è)
npm run electron:dev

# 3. æˆ–è€…åˆ†åˆ«å¯åŠ¨
npm run dev          # å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run backend:dev  # åç«¯å¼€å‘æœåŠ¡å™¨
```

#### **ç”Ÿäº§æ„å»º**
```bash
# æ„å»ºå‰ç«¯
npm run build

# æ„å»ºElectronåº”ç”¨
npm run electron:build

# æ„å»ºåç«¯å¯æ‰§è¡Œæ–‡ä»¶
npm run backend:build
```

#### **éƒ¨ç½²**
```bash
# ä½¿ç”¨ç»Ÿä¸€éƒ¨ç½²è„šæœ¬
./deploy.sh install

# æˆ–Dockeréƒ¨ç½²
./deploy.sh docker
```

### âš ï¸ **æ³¨æ„äº‹é¡¹**

1. **ä¾èµ–ä½ç½®å˜æ›´**: åç«¯ä¾èµ–ç°åœ¨ä½äºæ ¹ç›®å½•çš„node_modulesä¸­
2. **è·¯å¾„æ›´æ–°**: æ‰€æœ‰å¯¹åç«¯ä»£ç çš„å¼•ç”¨éœ€è¦ä½¿ç”¨`src/backend/`å‰ç¼€
3. **æ„å»ºé¡ºåº**: ç¡®ä¿å‰ç«¯æ„å»ºå®Œæˆåï¼Œå†è¿›è¡ŒElectronæ„å»º
4. **å†…å­˜ä½¿ç”¨**: å•ä¸€node_moduleså¯èƒ½ä¼šå ç”¨æ›´å¤šç£ç›˜ç©ºé—´ï¼Œä½†ä¾¿äºç®¡ç†

### ğŸ” **éªŒè¯å‘½ä»¤**

è¿è¡Œæ•´åˆéªŒè¯è„šæœ¬ç¡®è®¤æ‰€æœ‰æ›´æ”¹æ­£ç¡®ï¼š
```bash
./verify-integration.sh
```

### ğŸ“ˆ **æ€§èƒ½å¯¹æ¯”**

| æŒ‡æ ‡ | æ•´åˆå‰ | æ•´åˆå | æ”¹å–„ |
|------|--------|--------|------|
| å®‰è£…å‘½ä»¤æ•° | 2-3æ¬¡ | 1æ¬¡ | 66%å‡å°‘ |
| é…ç½®æ–‡ä»¶æ•° | 2ä¸ª | 1ä¸ª | 50%å‡å°‘ |
| æ„å»ºå¤æ‚åº¦ | é«˜ | ä½ | æ˜¾è‘—ç®€åŒ– |
| ç»´æŠ¤æˆæœ¬ | é«˜ | ä½ | æ˜æ˜¾é™ä½ |

---

## âœ… **æ•´åˆå®Œæˆç¡®è®¤**

ä¾èµ–æ•´åˆå·²æˆåŠŸå®Œæˆï¼ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨ç®€åŒ–çš„npmå‘½ä»¤ç®¡ç†æ•´ä¸ªé¡¹ç›®ï¼ŒåŒ…æ‹¬å‰ç«¯ã€åç«¯å’ŒElectronåº”ç”¨ã€‚

**å»ºè®®ä¸‹ä¸€æ­¥æ“ä½œ**:
1. è¿è¡Œ `./verify-integration.sh` éªŒè¯æ•´åˆç»“æœ
2. å°è¯• `npm install` æµ‹è¯•å®‰è£…æµç¨‹
3. è¿è¡Œ `npm run electron:dev` æµ‹è¯•å¼€å‘ç¯å¢ƒ