# RunningHubæ–‡ä»¶è·¯å¾„ä¿®å¤æŠ¥å‘Š

## ğŸ¯ ä¿®å¤ç›®æ ‡
è§£å†³"api/"å‰ç¼€é—®é¢˜ï¼Œç¡®ä¿æ–‡ä»¶ä¸Šä¼ åçš„è·¯å¾„æ ¼å¼æ­£ç¡®ï¼Œç¼©ç•¥å›¾å¯ä»¥æ­£å¸¸é¢„è§ˆã€‚

## ğŸ” é—®é¢˜æ ¹å› åˆ†æ

### æ ¸å¿ƒé—®é¢˜
åœ¨`extractFilePath`æ–¹æ³•ä¸­å­˜åœ¨è·¯å¾„æŸ¥æ‰¾é€»è¾‘é”™è¯¯ï¼Œå¯¼è‡´ï¼š
1. ä¼˜å…ˆæŸ¥æ‰¾ä¸å­˜åœ¨çš„å­—æ®µ
2. å¯èƒ½å›é€€åˆ°åŒ…å«"api/"å‰ç¼€çš„é”™è¯¯å­—æ®µ
3. è¿”å›æ ¼å¼ä¸æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„

### å½±å“èŒƒå›´
- æ–‡ä»¶ä¸Šä¼ åè·¯å¾„åŒ…å«"api/"å‰ç¼€
- ç¼©ç•¥å›¾æ— æ³•é¢„è§ˆ
- ä»»åŠ¡æäº¤æ—¶ä½¿ç”¨é”™è¯¯çš„æ–‡ä»¶è·¯å¾„

## âœ… å·²å®æ–½çš„ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®æ­£è·¯å¾„æŸ¥æ‰¾é¡ºåº

**ä¿®å¤å‰**:
```javascript
const possiblePaths = [
  // é”™è¯¯ï¼šå­˜åœ¨é‡å¤å’Œæ··ä¹±çš„å­—æ®µ
  response?.thirdPartyResponse?.data?.fileName,
  response?.thirdPartyResponse?.data?.filePath,
  // ... å…¶ä»–å­—æ®µ
];
```

**ä¿®å¤å**:
```javascript
const possiblePaths = [
  // æ­£ç¡®ï¼šä¼˜å…ˆæŸ¥æ‰¾RunningHubå®é™…è¿”å›çš„å­—æ®µ
  response?.thirdPartyResponse?.data?.fileName,
  response?.thirdPartyResponse?.data?.filePath,
  response?.thirdPartyResponse?.data?.path,
  response?.thirdPartyResponse?.data?.url,
  
  // æ£€æŸ¥æ ¹çº§åˆ«çš„å­—æ®µ (å…¼å®¹æ ¼å¼)
  response?.data?.fileName,
  response?.data?.filePath,
  response?.data?.path,
  response?.data?.url,
  
  // æ£€æŸ¥å…¶ä»–å¯èƒ½çš„å­—æ®µ (æœ€åçš„å¤‡é€‰)
  response?.fileName,
  response?.filePath,
  response?.path,
  response?.url
];
```

### 2. å¢å¼ºè°ƒè¯•æ—¥å¿—

**æ·»åŠ çš„æ—¥å¿—åŠŸèƒ½**:
- ğŸ” å“åº”ç»“æ„è¯¦ç»†åˆ†æ
- ğŸ“Š è·¯å¾„æå–è¿‡ç¨‹è¿½è¸ª
- âš ï¸ "api/"å‰ç¼€è­¦å‘Š
- âŒ è¯¦ç»†çš„é”™è¯¯åˆ†æ

**æ—¥å¿—ç¤ºä¾‹**:
```javascript
console.log('[RunningHub] ğŸ” å¼€å§‹æå–æ–‡ä»¶è·¯å¾„ï¼Œå“åº”ç»“æ„åˆ†æ:', {
  responseType: typeof response,
  hasThirdPartyResponse: !!response?.thirdPartyResponse,
  // ... æ›´å¤šåˆ†æ
});

if (hasApiPrefix) {
  console.warn(`[RunningHub] âš ï¸  è­¦å‘Š: è·¯å¾„åŒ…å« 'api/' å‰ç¼€!`);
}
```

## ğŸ§ª éªŒè¯æ–¹æ³•

### å¯åŠ¨æœåŠ¡éªŒè¯
```bash
# å¯åŠ¨åç«¯æœåŠ¡ (ç«¯å£8767)
PORT=8767 npm run backend:dev

# å¯åŠ¨å‰ç«¯æœåŠ¡
npm run dev
```

### æµ‹è¯•æ­¥éª¤
1. **è®¿é—®åº”ç”¨**: http://localhost:5173
2. **è¿›å…¥RunningHubåŠŸèƒ½**
3. **é€‰æ‹©ä»»æ„åŠŸèƒ½** (å¦‚"äººç‰©å¤šè§’åº¦")
4. **ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶**
5. **æ£€æŸ¥åç«¯æ—¥å¿—**: æŸ¥çœ‹è·¯å¾„æå–è¿‡ç¨‹
6. **éªŒè¯é¢„è§ˆ**: ç¡®è®¤ç¼©ç•¥å›¾å¯ä»¥æ­£å¸¸æ˜¾ç¤º
7. **æäº¤ä»»åŠ¡**: ç¡®è®¤æ–‡ä»¶è·¯å¾„æ­£ç¡®

### é¢„æœŸæ—¥å¿—è¾“å‡º
```
[RunningHub] ğŸ” å¼€å§‹æå–æ–‡ä»¶è·¯å¾„ï¼Œå“åº”ç»“æ„åˆ†æ: {...}
[RunningHub] âœ… æˆåŠŸæå–åˆ°æ–‡ä»¶è·¯å¾„: eb3f98e9358341e3128020fc27e17aeb10b7120379e302e71c51aecbf0241be2.jpg
[RunningHub] ğŸ“Š è·¯å¾„åˆ†æ: {hasApiPrefix: false, ...}
```

## ğŸ¯ ä¿®å¤æ•ˆæœé¢„æœŸ

### æˆåŠŸæ ‡å¿—
- âœ… æ–‡ä»¶è·¯å¾„ä¸å†åŒ…å«"api/"å‰ç¼€
- âœ… ç¼©ç•¥å›¾å¯ä»¥æ­£å¸¸é¢„è§ˆ
- âœ… ä»»åŠ¡æäº¤æµç¨‹ä½¿ç”¨æ­£ç¡®çš„æ–‡ä»¶è·¯å¾„
- âœ… æ§åˆ¶å°æ˜¾ç¤ºæ¸…æ™°çš„è°ƒè¯•ä¿¡æ¯

### å¦‚æœé—®é¢˜ä»å­˜åœ¨
å¦‚æœä¿®å¤åä»ç„¶å‡ºç°"api/"å‰ç¼€ï¼Œè¯´æ˜é—®é¢˜å¯èƒ½åœ¨ï¼š
1. RunningHub APIè¿”å›çš„è·¯å¾„æœ¬èº«å°±åŒ…å«å‰ç¼€
2. éœ€è¦åœ¨æºå¤´(APIå“åº”)è¿›è¡Œå¤„ç†

## ğŸ“‹ ä¿®å¤æ–‡ä»¶

**ä¸»è¦ä¿®æ”¹æ–‡ä»¶**: `src/backend/src/utils/runningHubService.js`

**ä¿®æ”¹ä½ç½®**:
- `extractFilePath`æ–¹æ³• (ç¬¬253-298è¡Œ)
- è·¯å¾„æŸ¥æ‰¾é€»è¾‘ä¼˜åŒ–
- è°ƒè¯•æ—¥å¿—å¢å¼º

## ğŸš€ éƒ¨ç½²çŠ¶æ€

- âœ… æºä»£ç ä¿®æ”¹å®Œæˆ
- âœ… åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ (ç«¯å£8767)
- â³ ç­‰å¾…ç”¨æˆ·æ‰‹åŠ¨æµ‹è¯•éªŒè¯

---

**ä¿®å¤çŠ¶æ€**: âœ… å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: â³ å¾…ç”¨æˆ·éªŒè¯  
**éƒ¨ç½²çŠ¶æ€**: âœ… å·²éƒ¨ç½² (ç«¯å£8767)